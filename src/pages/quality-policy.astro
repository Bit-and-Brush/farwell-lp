---
import { getPageDataWithLayoutData } from "@/api";
import type { GetQualityPolicyPageDataResponse } from "@/api/type";
import PageHero from "@/components/common/page-hero.astro";
import ProsedContent from "@/components/common/prosed-content.astro";
import MainLayout from "@/layouts/main-layout.astro";

const [qualityPolicyData, headerData, footerData] =
  await getPageDataWithLayoutData<GetQualityPolicyPageDataResponse>(
    "qualityPolicy"
  );
const { areaClient, catalogFile } = headerData;
const { services, description, contact } = footerData;
const { header, qualityPolicyContent } = qualityPolicyData;
---

<MainLayout
  extendedTitle={header.title}
  footer={{
    services: services.map(({ title }) => title),
    description,
    contacts:
      contact.map(({ fields: { value, icon } }) => ({ value, icon })) ?? [],
  }}
  headerLinks={{ catalog: catalogFile, clientArea: areaClient }}
>
  <main>
    <PageHero title={header.title} subtitle={header.description} />
    <ProsedContent
      className="prose-p:leading-6 prose-h3:text-secondary prose-h3:text-2xl prose-h3:font-bold marker:text-primary container max-w-4xl space-y-8 py-10 text-base lg:py-16"
      content={qualityPolicyContent}
    />
  </main>
</MainLayout>
